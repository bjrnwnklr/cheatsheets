<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Bjoern Winkler" />
  <title>Advent of Code 2018 Python cheat sheet</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */
  </style>
  <link rel="stylesheet" href="retro.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">Advent of Code 2018 Python cheat sheet</h1>
<p class="author">Bjoern Winkler</p>
<p class="date">26-01-2019</p>
</header>
<h1 id="advent-of-code---cheatsheet">Advent of code - cheatsheet</h1>
<p>Some cool tricks learned from Advent Of Code 2018</p>
<ul>
<li><a href="#advent-of-code---cheatsheet">Advent of code - cheatsheet</a>
<ul>
<li><a href="#1-decoding-some-lines-from-input-file">1. Decoding some lines from input file</a></li>
<li><a href="#2-splitting-input-into-a-list-of-tuples-and-converting-to-int-at-the-same-time">2. Splitting input into a list of tuples and converting to int at the same time</a></li>
<li><a href="#2-using-regex-to-find-data-in-input-file-and-converting-to-timestamp">2. Using regex to find data in input file and converting to timestamp</a></li>
<li><a href="#3-sorting-a-dictionary">3. sorting a dictionary</a></li>
<li><a href="#4-finding-maximum-value-key-in-a-dictionary">4. finding maximum value /key in a dictionary</a></li>
<li><a href="#5-finding-maximum-from-a-dictionary-with-tuple-as-key">5. finding maximum from a dictionary with tuple as key</a></li>
<li><a href="#6-list-comprehension-with-3-loops">6. List comprehension with 3 loops</a></li>
<li><a href="#advent-of-code-2018-day-11">Advent of code 2018, day 11</a>
<ul>
<li><a href="#using-a-partial-sum-table-to-calculate-sums-across-a-2d-grid">Using a partial sum table to calculate sums across a 2D grid</a></li>
</ul></li>
<li><a href="#advent-of-code-2018-day-12">Advent of code 2018, day 12</a>
<ul>
<li><a href="#using-regex-to-find-all-lines-that-contain--and">using regex to find all lines that contain ‘.’ and ‘#’</a></li>
</ul></li>
<li><a href="#advent-of-code-2018-day-13">Advent of code 2018, day 13</a>
<ul>
<li><a href="#sorting-a-list-of-objects-by-tuple-of-object-attributes">sorting a list of objects by tuple of object attributes</a></li>
</ul></li>
<li><a href="#advent-of-code-2018-day-20">Advent of code 2018, day 20</a>
<ul>
<li><a href="#parsing-a-regex-like-input-string-with-branches-and-options">Parsing a regex like input string with branches and options</a></li>
</ul></li>
</ul></li>
</ul>
<h2 id="decoding-some-lines-from-input-file">1. Decoding some lines from input file</h2>
<p>Lines look like</p>
<pre><code>#1 @ 1,3: 4x4
#2 @ 3,1: 4x4
#3 @ 5,5: 2x2</code></pre>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># regex to find all numbers (\d) with 1 or more digits (+) and optional &#39;-&#39; for negative numbers (&#39;-?&#39; (? = 0 or 1))</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co"># map converts them to int tuples</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co"># * unpacks the output</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="im">import</span> re</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">input_file <span class="op">=</span> <span class="bu">open</span>(<span class="vs">r&#39;filename.txt&#39;</span>, <span class="st">&#39;r&#39;</span>)</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">claims <span class="op">=</span> [[<span class="op">*</span><span class="bu">map</span>(<span class="bu">int</span>, re.findall(<span class="vs">r&#39;-?\d+&#39;</span>, l))] <span class="cf">for</span> l <span class="kw">in</span> input_file.splitlines() <span class="cf">if</span> l]</a></code></pre></div>
<h2 id="splitting-input-into-a-list-of-tuples-and-converting-to-int-at-the-same-time">2. Splitting input into a list of tuples and converting to int at the same time</h2>
<p>Input looks like:</p>
<pre><code>77, 83
345, 79</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb4-1" data-line-number="1">coordinates_str <span class="op">=</span> [<span class="bu">tuple</span>(<span class="bu">map</span>(<span class="bu">int</span>, line.split(<span class="st">&#39;,&#39;</span>))) <span class="cf">for</span> line <span class="kw">in</span> input_file]</a></code></pre></div>
<h2 id="using-regex-to-find-data-in-input-file-and-converting-to-timestamp">2. Using regex to find data in input file and converting to timestamp</h2>
<p>input lines look like</p>
<pre><code>[1518-05-24 23:56] Guard #1721 begins shift
[1518-08-22 00:09] falls asleep</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># () in regex save results as &#39;groups&#39; - can be accessed by .group(n) argument</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">one_line <span class="op">=</span> re.search(<span class="vs">r&#39;\[(.+)\]\s(\w+)\s(.+)&#39;</span>, data_input[<span class="dv">0</span>])</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co"># datetime.fromisoformat(string) converts timestamp in yyyy-mm-dd hh:mm format</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">timestamp <span class="op">=</span> datetime.fromisoformat(one_line.group(<span class="dv">1</span>))</a></code></pre></div>
<h2 id="sorting-a-dictionary">3. sorting a dictionary</h2>
<p><code>event_list</code> is a list of dictionaries, <code>keys</code> is a list of strings that represent key names <code>values</code> is a list of values</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># append a new dictionary made of keys and values</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">event_list.append(<span class="bu">dict</span>(<span class="bu">zip</span>(keys, values)))</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co"># sort the list of dictionaries using the &#39;timestamp&#39; entry of each dictionary</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">sorted_events <span class="op">=</span> <span class="bu">sorted</span>(event_list, key<span class="op">=</span><span class="kw">lambda</span> event_entry: event_entry[<span class="st">&#39;timestamp&#39;</span>])</a></code></pre></div>
<h2 id="finding-maximum-value-key-in-a-dictionary">4. finding maximum value /key in a dictionary</h2>
<p>Find the key for the maximum value in a dictionary - similar to the sorting above</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb8-1" data-line-number="1">k <span class="op">=</span> <span class="bu">max</span>(dictionary, key <span class="op">=</span> <span class="kw">lambda</span> k: dictionary[k])</a></code></pre></div>
<h2 id="finding-maximum-from-a-dictionary-with-tuple-as-key">5. finding maximum from a dictionary with tuple as key</h2>
<p>Find the key for the maximum value in a dictionary with a (‘string’, int) tuple as key, like</p>
<pre><code>dictionary[(&#39;2879&#39;, 49)] = 21</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb10-1" data-line-number="1">best_key1, best_key2 <span class="op">=</span> <span class="bu">max</span>(dictionary, key <span class="op">=</span> dictionary.get)</a></code></pre></div>
<h2 id="list-comprehension-with-3-loops">6. List comprehension with 3 loops</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># creates tuples (0, 0, 0) to (10, 10, 10)</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">test_squares <span class="op">=</span> [(i, j, k) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>) <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>) <span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>)]</a></code></pre></div>
<h2 id="advent-of-code-2018-day-11">Advent of code 2018, day 11</h2>
<h3 id="using-a-partial-sum-table-to-calculate-sums-across-a-2d-grid">Using a partial sum table to calculate sums across a 2D grid</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co"># create partial sums</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co"># A B C</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co"># D E F</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co"># G H I</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co"># partial sum for I =</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co"># H + F + f(I) - E</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co"># (x-1, y) + (x, y-1) + f(I) - (x-1, y-1)</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">300</span>):</a>
<a class="sourceLine" id="cb12-9" data-line-number="9">    <span class="cf">for</span> y <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">300</span>):</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">        part_sum[x][y] <span class="op">=</span> get_part_sum(x<span class="dv">-1</span>, y) <span class="op">+</span> get_part_sum(x, y<span class="dv">-1</span>) <span class="op">+</span> grid[x][y] <span class="op">-</span> get_part_sum(x<span class="dv">-1</span>, y<span class="dv">-1</span>)</a></code></pre></div>
<h2 id="advent-of-code-2018-day-12">Advent of code 2018, day 12</h2>
<h3 id="using-regex-to-find-all-lines-that-contain-.-and">using regex to find all lines that contain ‘.’ and ‘#’</h3>
<p>Input looked like this:</p>
<pre><code>initial state: #.##.###.#.##...##..#..##....#.#.#.#.##....##..#..####..###.####.##.#..#...#..######.#.....#..##...#

.#.#. =&gt; .
...#. =&gt; #
..##. =&gt; .
....# =&gt; .
##.#. =&gt; #</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="im">import</span> re</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co"># &#39;text&#39; is the input file</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3">initial, <span class="op">*</span>pairs <span class="op">=</span> re.findall(<span class="vs">r&#39;[.#]+&#39;</span>, text)</a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co"># feeds the first line into &#39;initial&#39; and the rest of the lines into a list &#39;pairs&#39;</span></a></code></pre></div>
<h2 id="advent-of-code-2018-day-13">Advent of code 2018, day 13</h2>
<h3 id="sorting-a-list-of-objects-by-tuple-of-object-attributes">sorting a list of objects by tuple of object attributes</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># cr.r = row index</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co"># cr.c = column index</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co"># we want to sort by lowest row first, then lowest column second</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co"># this works with tuples</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5">carts <span class="op">=</span> <span class="bu">sorted</span>(carts, key<span class="op">=</span> <span class="kw">lambda</span> cr: (cr.r, cr.c))</a></code></pre></div>
<h2 id="advent-of-code-2018-day-20">Advent of code 2018, day 20</h2>
<h3 id="parsing-a-regex-like-input-string-with-branches-and-options">Parsing a regex like input string with branches and options</h3>
<ul>
<li><code>'('</code> starts a branch, <code>'|'</code> is a divider between options, <code>')'</code> closes a branch</li>
<li>parse through the input string and remember positions when encountering a branch - by using a stack</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co"># directions</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">directions <span class="op">=</span> {</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">                <span class="st">&#39;N&#39;</span>: (<span class="dv">0</span>, <span class="dv">-1</span>),</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">                <span class="st">&#39;E&#39;</span>: (<span class="dv">1</span>, <span class="dv">0</span>),</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">                <span class="st">&#39;S&#39;</span>: (<span class="dv">0</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">                <span class="st">&#39;W&#39;</span>: (<span class="op">-</span><span class="dv">1</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb16-8" data-line-number="8"></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co"># stack to track current position</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10">positions <span class="op">=</span> []</a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co"># starting positions</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12">x, y <span class="op">=</span> <span class="dv">5000</span>, <span class="dv">5000</span></a>
<a class="sourceLine" id="cb16-13" data-line-number="13"><span class="co"># previous positions</span></a>
<a class="sourceLine" id="cb16-14" data-line-number="14">pre_x, pre_y <span class="op">=</span> x, y</a>
<a class="sourceLine" id="cb16-15" data-line-number="15"><span class="co"># distance tracking dictionary</span></a>
<a class="sourceLine" id="cb16-16" data-line-number="16">distances <span class="op">=</span> defaultdict(<span class="bu">int</span>)</a>
<a class="sourceLine" id="cb16-17" data-line-number="17"><span class="co"># starting distance</span></a>
<a class="sourceLine" id="cb16-18" data-line-number="18">dist <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb16-19" data-line-number="19"></a>
<a class="sourceLine" id="cb16-20" data-line-number="20"><span class="co">########## set input</span></a>
<a class="sourceLine" id="cb16-21" data-line-number="21">f <span class="op">=</span> <span class="bu">open</span>(<span class="vs">r&#39;input.txt&#39;</span>).read().rstrip()</a>
<a class="sourceLine" id="cb16-22" data-line-number="22">maze <span class="op">=</span> f</a>
<a class="sourceLine" id="cb16-23" data-line-number="23"></a>
<a class="sourceLine" id="cb16-24" data-line-number="24"><span class="cf">for</span> c <span class="kw">in</span> maze[<span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>]:</a>
<a class="sourceLine" id="cb16-25" data-line-number="25">    <span class="bu">print</span>(<span class="st">&#39;Char: </span><span class="sc">%s</span><span class="st">, stack: </span><span class="sc">%d</span><span class="st">&#39;</span> <span class="op">%</span> (c, <span class="bu">len</span>(positions)))</a>
<a class="sourceLine" id="cb16-26" data-line-number="26">    <span class="cf">if</span> c <span class="op">==</span> <span class="st">&#39;(&#39;</span>:   <span class="co"># save position if we find a new branch</span></a>
<a class="sourceLine" id="cb16-27" data-line-number="27">        positions.append((x, y))</a>
<a class="sourceLine" id="cb16-28" data-line-number="28">    <span class="cf">elif</span> c <span class="op">==</span> <span class="st">&#39;)&#39;</span>: <span class="co"># end of branch, pop position before branch</span></a>
<a class="sourceLine" id="cb16-29" data-line-number="29">        x, y <span class="op">=</span> positions.pop()</a>
<a class="sourceLine" id="cb16-30" data-line-number="30">    <span class="cf">elif</span> c <span class="op">==</span> <span class="st">&#39;|&#39;</span>: <span class="co"># option, go back to last position but leave on stack</span></a>
<a class="sourceLine" id="cb16-31" data-line-number="31">                   <span class="co"># until we find the closing &#39;)&#39;</span></a>
<a class="sourceLine" id="cb16-32" data-line-number="32">        x, y <span class="op">=</span> positions[<span class="op">-</span><span class="dv">1</span>]</a>
<a class="sourceLine" id="cb16-33" data-line-number="33">    <span class="cf">else</span>:          <span class="co"># process door</span></a>
<a class="sourceLine" id="cb16-34" data-line-number="34">        dx, dy <span class="op">=</span> directions[c] <span class="co"># get direction change</span></a>
<a class="sourceLine" id="cb16-35" data-line-number="35">        x <span class="op">+=</span> dx</a>
<a class="sourceLine" id="cb16-36" data-line-number="36">        y <span class="op">+=</span> dy</a>
<a class="sourceLine" id="cb16-37" data-line-number="37">        <span class="co"># add to distance (distance for current position)</span></a>
<a class="sourceLine" id="cb16-38" data-line-number="38">        <span class="cf">if</span> distances[(x, y)] <span class="op">!=</span> <span class="dv">0</span>:  <span class="co"># we already have a distance entry - we were here already</span></a>
<a class="sourceLine" id="cb16-39" data-line-number="39">            <span class="co"># take the minimum since there is a shorter route to the room</span></a>
<a class="sourceLine" id="cb16-40" data-line-number="40">            distances[(x, y)] <span class="op">=</span> <span class="bu">min</span>(distances[(x, y)], distances[(pre_x, pre_y)] <span class="op">+</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb16-41" data-line-number="41">        <span class="cf">else</span>:  <span class="co"># new room, add previous distance plus 1</span></a>
<a class="sourceLine" id="cb16-42" data-line-number="42">            distances[(x, y)] <span class="op">=</span> distances[(pre_x, pre_y)] <span class="op">+</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb16-43" data-line-number="43"></a>
<a class="sourceLine" id="cb16-44" data-line-number="44">    pre_x, pre_y <span class="op">=</span> x, y</a></code></pre></div>
</body>
</html>
